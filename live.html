<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cristo Te Llama DE/NJ - Live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  font-family: 'Playfair Display', serif;
  background-color: #E8DFFB;
  color: #000;
  transition: background 0.5s, color 0.5s;
}

body.dark {
  background-color: #3A0CA3;
  color: #fff;
}

/* NAVIGATION */
nav {
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
  padding: 15px 0;
  position: sticky;
  top: 0;
  z-index: 1000;
}

nav a {
  text-decoration: none;
  font-weight: bold;
  padding: 10px 20px;
  border-radius: 25px;
  background-color: #fff;
  color: #000;
  transition: all 0.3s ease;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

nav a:hover {
  background-color: #6a0dad;
  color: #fff;
  transform: translateY(-3px);
}

/* HERO */
section.hero {
  padding: 60px 20px;
  text-align: center;
}

/* LIVE STREAM */
#liveStream {
  max-width: 720px;
  margin: 30px auto;
  padding: 20px;
  border-radius: 15px;
  background-color: #fff;
  text-align: center;
  border: 2px solid #6a0dad;
}

#liveStream.dark { border-color: #9d4edd; }

#liveStream iframe {
  width: 100%;
  height: 400px;
  border-radius: 10px;
  border: none;
}

/* DARK MODE TOGGLE */
#darkModeToggle {
  position: fixed;
  top: 15px;
  right: 15px;
  cursor: pointer;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1.5rem;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
}
</style>
</head>
<body>

<!-- DARK MODE TOGGLE -->
<div id="darkModeToggle">ðŸŒ“</div>

<!-- NAVIGATION -->
<nav>
  <a href="index.html">Home</a>
  <a href="index.html#servicios">Service Times</a>
  <a href="index.html#eventos">Events</a>
  <a href="index.html#contacto">Contact</a>
  <a href="index.html#social">Social</a>
  <a href="live.html">Live</a>
</nav>

<section class="hero">
  <h1>Live Stream</h1>
  <p>Watch our live broadcast from Facebook right here.</p>
</section>

<section id="liveStream">
  <p id="status">Checking if we are live...</p>
</section>

<script>
// DARK MODE TOGGLE
const darkModeToggle = document.getElementById('darkModeToggle');
darkModeToggle.addEventListener('click', () => { 
  document.body.classList.toggle('dark'); 
  document.getElementById('liveStream').classList.toggle('dark');
});

// FACEBOOK LIVE AUTO DETECTION
const pageId = '310457289629080'; // your Facebook Page ID
const liveContainer = document.getElementById('liveStream');
const status = document.getElementById('status');

// Function to embed live video
function showLiveVideo(videoId){
  liveContainer.innerHTML = `
    <iframe 
      src="https://www.facebook.com/plugins/video.php?href=https://www.facebook.com/${pageId}/videos/${videoId}/&show_text=false&width=560"
      allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
      allowfullscreen>
    </iframe>
  `;
}

// Fetch live video using Facebook Graph API
async function checkLive() {
  try {
    // This requires a Facebook App Access Token or User Access Token
    // Example token placeholder: 'YOUR_FACEBOOK_ACCESS_TOKEN'
    const token = 'YOUR_FACEBOOK_ACCESS_TOKEN';
    const res = await fetch(`https://graph.facebook.com/${pageId}/live_videos?status=LIVE&access_token=${token}`);
    const data = await res.json();

    if(data.data && data.data.length > 0){
      const liveVideoId = data.data[0].id;
      showLiveVideo(liveVideoId);
    } else {
      status.innerText = "No live broadcast currently. Check back during our service times!";
    }
  } catch(e){
    console.error(e);
    status.innerText = "Unable to load live stream at this time.";
  }
}

checkLive();
</script>
</body>
</html>
