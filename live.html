<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cristo Te Llama DE/NJ - Live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- DARK MODE TOGGLE -->
<div id="darkModeToggle">ðŸŒ“</div>

<!-- NAVIGATION -->
<nav>
  <a href="index.html" data-en="Home" data-es="Inicio">Home</a>
  <a href="index.html#services" data-en="Service Times" data-es="Horarios de Servicio">Service Times</a>
  <a href="index.html#events" data-en="Events" data-es="Eventos">Events</a>
  <a href="index.html#contact" data-en="Contact" data-es="Contacto">Contact</a>
  <a href="calendar.html" data-en="Calendar" data-es="Calendario">Calendar</a>
  <a href="live.html" data-en="Live" data-es="En Vivo">Live</a>
</nav>

<section class="hero">
  <h1 data-en="Live Stream" data-es="TransmisiÃ³n En Vivo">Live Stream</h1>
  <p data-en="Watch our live broadcast from Facebook right here." data-es="Mira nuestra transmisiÃ³n en vivo de Facebook aquÃ­.">Watch our live broadcast from Facebook right here.</p>
</section>

<section id="liveStream">
  <p id="status" data-en="Checking if we are live..." data-es="Verificando si estamos en vivo...">Checking if we are live...</p>
</section>

<script>
  // FACEBOOK LIVE AUTO DETECTION
  const pageId = '310457289629080'; // Your Facebook Page ID
  const liveContainer = document.getElementById('liveStream');
  const status = document.getElementById('status');

  function showLiveVideo(videoId){
    liveContainer.innerHTML = `
      <iframe 
        src="https://www.facebook.com/plugins/video.php?href=https://www.facebook.com/${pageId}/videos/${videoId}/&show_text=false&width=560"
        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
        allowfullscreen>
      </iframe>
    `;
  }

  async function checkLive() {
    try {
      const token = 'YOUR_FACEBOOK_ACCESS_TOKEN';
      const res = await fetch(`https://graph.facebook.com/${pageId}/live_videos?status=LIVE&access_token=${token}`);
      const data = await res.json();
      if(data.data && data.data.length > 0){
        const liveVideoId = data.data[0].id;
        showLiveVideo(liveVideoId);
      } else {
        status.innerText = "No live broadcast currently. Check back during our service times!";
      }
    } catch(e){
      console.error(e);
      status.innerText = "Unable to load live stream at this time.";
    }
  }

  checkLive();
</script>

<script src="main.js"></script>
</body>
</html>
