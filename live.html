<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cristo Te Llama DE/NJ - Live</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Dark Mode Toggle -->
<div id="darkModeToggle">üåì</div>

<!-- Navigation -->
<nav>
  <a href="index.html" data-en="Home" data-es="Inicio">Home</a>
  <a href="index.html#services" data-en="Service Times" data-es="Horarios">Service Times</a>
  <a href="index.html#events" data-en="Events" data-es="Eventos">Events</a>
  <a href="index.html#contact" data-en="Contact" data-es="Contacto">Contact</a>
  <a href="index.html#social" data-en="Social" data-es="Social">Social</a>
  <a href="live.html" data-en="Live" data-es="En Vivo">Live</a>
  <button id="langToggle">üåê</button>
</nav>

<!-- Hero Section -->
<section class="hero">
  <h1 data-en="Live Stream" data-es="Transmisi√≥n en Vivo">Live Stream</h1>
  <p data-en="Watch our live broadcast from Facebook right here." data-es="Mira nuestra transmisi√≥n en vivo desde Facebook aqu√≠.">Watch our live broadcast from Facebook right here.</p>
</section>

<!-- Live Stream Section -->
<section id="liveStream" class="calendar-wrapper">
  <p id="status">Checking if we are live...</p>
</section>

<!-- Messenger Button -->
<a href="https://m.me/YOUR_PAGE" target="_blank" class="messenger-btn">
  <img src="images/messenger.png" alt="Messenger" class="messenger-logo">
  Messenger
</a>

<!-- Footer / Social -->
<section id="social" class="social-icons">
  <a href="#"><img src="images/facebook.png" alt="Facebook"></a>
  <a href="#"><img src="images/instagram.png" alt="Instagram"></a>
  <a href="#"><img src="images/youtube.png" alt="YouTube"></a>
</section>

<script src="main.js"></script>
<script>
  // Facebook Live Auto Detection
  const pageId = '310457289629080';
  const liveContainer = document.getElementById('liveStream');
  const status = document.getElementById('status');

  function showLiveVideo(videoId){
    liveContainer.innerHTML = `
      <iframe 
        src="https://www.facebook.com/plugins/video.php?href=https://www.facebook.com/${pageId}/videos/${videoId}/&show_text=false&width=560"
        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
        allowfullscreen>
      </iframe>
    `;
  }

  async function checkLive() {
    try {
      const token = 'YOUR_FACEBOOK_ACCESS_TOKEN';
      const res = await fetch(`https://graph.facebook.com/${pageId}/live_videos?status=LIVE&access_token=${token}`);
      const data = await res.json();
      if(data.data && data.data.length > 0){
        const liveVideoId = data.data[0].id;
        showLiveVideo(liveVideoId);
      } else {
        status.innerText = "No live broadcast currently. Check back during our service times!";
      }
    } catch(e){
      console.error(e);
      status.innerText = "Unable to load live stream at this time.";
    }
  }

  checkLive();
</script>
</body>
</html>
