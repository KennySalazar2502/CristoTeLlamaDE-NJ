<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Stream - Cristo Te Llama DE/NJ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- NAVIGATION -->
<nav class="nav-bar">
  <ul class="nav-list">
    <li><a class="nav-item" href="index.html">Home</a></li>
    <li><a class="nav-item" href="index.html#services">Service Times</a></li>
    <li><a class="nav-item" href="index.html#events">Events</a></li>
    <li><a class="nav-item" href="index.html#contact">Contact</a></li>
    <li><a class="nav-item" href="index.html#social">Social</a></li>
    <li><a class="nav-item" href="live.html">Live</a></li>
  </ul>
  <button id="darkModeToggle">ðŸŒ“</button>
  <button id="langToggle" data-en="ES" data-es="EN">ES</button>
</nav>

<section class="hero">
  <h1 data-en="Live Stream" data-es="TransmisiÃ³n en Vivo">Live Stream</h1>
  <p data-en="Watch our live broadcast from Facebook" data-es="Mire nuestra transmisiÃ³n en vivo desde Facebook">Watch our live broadcast from Facebook</p>
</section>

<section id="liveStream" class="calendar-wrapper">
  <p id="status" data-en="Checking if we are live..." data-es="Verificando si estamos en vivo...">Checking if we are live...</p>
</section>

<script>
const pageId = '310457289629080';
const liveContainer = document.getElementById('liveStream');
const status = document.getElementById('status');

function showLiveVideo(videoId){
  liveContainer.innerHTML = `
    <iframe 
      src="https://www.facebook.com/plugins/video.php?href=https://www.facebook.com/${pageId}/videos/${videoId}/&show_text=false&width=560"
      allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
      allowfullscreen>
    </iframe>
  `;
}

async function checkLive() {
  try {
    const token = 'YOUR_FACEBOOK_ACCESS_TOKEN';
    const res = await fetch(`https://graph.facebook.com/${pageId}/live_videos?status=LIVE&access_token=${token}`);
    const data = await res.json();
    if(data.data && data.data.length > 0){
      const liveVideoId = data.data[0].id;
      showLiveVideo(liveVideoId);
    } else {
      status.innerText = status.dataset.en;
      if(document.body.classList.contains('dark-mode')) status.innerText = status.dataset.en; // keep language toggle active
    }
  } catch(e){
    console.error(e);
    status.innerText = "Unable to load live stream at this time.";
  }
}

checkLive();
</script>

<script src="main.js"></script>
</body>
</html>
