<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cristo Te Llama DE/NJ - Live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- DARK MODE TOGGLE -->
<div id="darkModeToggle">üåì</div>

<!-- NAVIGATION -->
<nav>
  <a href="index.html" data-en="Home" data-es="Inicio">Home</a>
  <a href="index.html#calendar" data-en="Service Times" data-es="Servicios">Service Times</a>
  <a href="index.html#events" data-en="Events" data-es="Eventos">Events</a>
  <a href="index.html#contact" data-en="Contact" data-es="Contacto">Contact</a>
  <a href="index.html#social" data-en="Social" data-es="Social">Social</a>
  <a href="live.html" data-en="Live" data-es="En Vivo">Live</a>
</nav>

<section class="hero">
  <h1 data-en="Live Stream" data-es="Transmisi√≥n en Vivo">Live Stream</h1>
  <p data-en="Watch our live broadcast from YouTube here." data-es="Mira nuestra transmisi√≥n en vivo de YouTube aqu√≠.">
    Watch our live broadcast from YouTube here.
  </p>
  <button onclick="toggleLang()">üåê EN/ES</button>
</section>

<section id="liveStream">
  <p id="status">Checking if we are live...</p>
</section>

<script>
  // Dark mode sync
  const darkToggle = document.getElementById('darkModeToggle');
  darkToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    localStorage.setItem('darkMode', document.body.classList.contains('dark'));
  });
  if(localStorage.getItem('darkMode') === 'true') document.body.classList.add('dark');

  // Language toggle
  function toggleLang() {
    document.querySelectorAll('[data-en]').forEach(el => {
      el.innerText = el.innerText === el.dataset.en ? el.dataset.es : el.dataset.en;
    });
  }

  // YouTube live embed
  const channelId = 'UCB-beIq8bOOnmi78a8uEvWQ'; // Your channel ID
  const liveContainer = document.getElementById('liveStream');
  const status = document.getElementById('status');

  // Show live video
  function showLiveVideo(videoId){
    liveContainer.innerHTML = `<iframe 
      width="100%" height="400" 
      src="https://www.youtube.com/embed/${videoId}?autoplay=1" 
      frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
    </iframe>`;
  }

  // Fetch live video using YouTube API (placeholder logic)
  async function checkLive() {
    try {
      // Replace 'YOUR_API_KEY' with actual YouTube Data API key if you want real detection
      const res = await fetch(`https://www.googleapis.com/youtube/v3/search?channelId=${channelId}&eventType=live&type=video&part=snippet&key=YOUR_API_KEY`);
      const data = await res.json();
      if(data.items && data.items.length>0){
        const videoId = data.items[0].id.videoId;
        showLiveVideo(videoId);
      } else {
        status.innerText = "No live broadcast currently. Check back during our service times!";
      }
    } catch(e){
      console.error(e);
      status.innerText = "Unable to load live stream at this time.";
    }
  }
  checkLive();
</script>

</body>
</html>
